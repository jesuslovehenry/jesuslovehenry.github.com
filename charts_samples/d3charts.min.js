(function(){var aW=null;if(!arguments.length){aW=window.d3charts=window.d3charts||{}}else{if(typeof arguments[0]==="object"){aW=arguments[0]}else{var aQ=arguments[0].split("."),aR=window;for(var ai=0;ai<aQ.length;ai++){if(!aR[aQ[ai]]){aR[aQ[ai]]={};aR=aR[aQ[ai]]}}aW=window[aQ[0]]}}d3.selection.prototype.bbox=function(bh){if(!bh&&this._bbox){return this._bbox}this._bbox={x:0,y:0,width:0,height:0};for(var bf=0,be=this.length;bf<be;bf++){for(var bj=this[bf],bg=0,bl=bj.length;bg<bl;bg++){var bi=bj[bg];if(bi&&(bi.nodeName==="g"||bi.nodeName==="text")){var bk=bi._bbox;if(!bk||bh){bk=bk||bi.getBBox()}this._bbox.x=(bk.x<this._bbox.x)?bk.x:this._bbox.x;this._bbox.y=(bk.y<this._bbox.y)?bk.y:this._bbox.y;this._bbox.width=(bk.x+bk.width>this._bbox.x+this._bbox.width)?bk.width:this._bbox.width;this._bbox.height=(bk.y+bk.height>this._bbox.y+this._bbox.height)?bk.height:this._bbox.height}}}return this._bbox};d3.transition.prototype.bbox=d3.selection.prototype.bbox;var U={lazyRender:true,prefix:"d3charts"};var ah=0;var aK={svg:"svg",chart:"chart",chartTitle:"chartTitle",legend:"legend",legendItem:"legendItem",plot:"plot",seriesPlot:"seriesPlot",axis:"axis",xAxis:"xAxis",yAxis:"yAxis",series:"series",barSeries:"barSeries",lineSeries:"lineSeries",areaSeries:"areaSeries",pieSeries:"pieSeries",dialSeries:"dialSeries",bubbleSeries:"bubbleSeries",scatterSeries:"scatterSeries",linearSeries:"linearSeries",bulletSeries:"bulletSeries",sparkLineSeries:"sparkLineSeries",cylinderSeries:"cylinderSeries",thermometerSeries:"thermometerSeries",gadget:"gadget",border:"border",label:"label",title:"title",icon:"icon",tooltip:"tooltip",bands:"bands",ranges:"ranges",pointers:"pointers",tick:"tick",major:"major",minor:"minor",marker:"marker",band:"band",line:"line",range:"range",pointer:"pointer",indicator:"indicator",arcDial:"arcDial",measure:"measure",target:"target",border:"border",seriesPlot:"seriesPlot",domain:"domain",dialArc:"dialArc",ledLabel:"ledLabel",scaleTube:"scaleTube",scaleBall:"scaleBall"};var K=function(){var bf={};for(var be in aK){bf[be]="."+aK[be]}return bf};aK.FN=K();function al(be,i){this.fInit.apply(this,arguments)}al.prototype={_super:null,id:null,content:null,fInit:function(be,i){this.id=be;this.content=i}};al.ID_OPTION_UNDEFINED=1001;var aX={enabled:false,text:"",xOffset:0,yOffset:0,anchor:"start",rotation:0,rotatoinAnchor:"start",font:{fill:"black",fillOpacity:0},padding:{top:0,left:0,bottom:0,right:0},border:{enabled:false,stroke:"black",strokeOpacity:1,strokeWidth:0,dashStyle:"solid",roundCorner:0},fillOpacity:0};var w={baseSeries:{type:"",name:"",layoutData:{vertialSpan:1,horizontalSpan:1},data:[]}};var ad={bulletSeries:{}};var E={};var ar={enabled:true,type:"line",fill:"black",fillOpacity:1,border:{},labelPosition:"below",label:{enabled:false,text:"",font:{fill:"black",fillOpacity:1,textAnchor:"middle",},fill:"white",fillOpacity:0.000001,border:{},},markerPosition:"below",marker:{enabled:false,type:"circle",size:5,border:{},fill:"white",fillOpacity:1}};var D={enabled:true,reverse:false,xOffset:0,yOffset:0,title:{position:"",},label:{enabled:true,normalize:true,fill:"black",fillOpacity:1,font:{},rotation:0,position:"same",format:null},axisLine:{enabled:true,stroke:"black",strokeOpacity:1,strokeWidth:1},tick:{enabled:true,padding:3,scale:{},outerTickSize:6,showStartTickLabel:true,showEndTickLabel:true,major:{enabled:true,stroke:"black",strokeOpacity:1,strokeWidth:2,style:"below",size:6,lineStepNumber:1},minor:{enabled:false,count:3,stroke:"black",strokeOpacity:1,strokeWidth:1,style:"below",size:4}}};var aT=m(q(D),{});var e=m(q(D),{});var aN={fillOpacity:0,border:{},colorPalette:[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175],title:{enabled:false,position:"top",x:0,y:0,anchor:"start",vAlign:"middle",hAlign:"middle",rotation:0,rotatoinAnchor:"start",margin:{top:0,left:0,bottom:0,right:0},padding:{top:0,left:0,bottom:0,right:0},borderStyle:{enabled:false,stroke:"black",strokeOpacity:1,strokeWidth:0,dashStyle:"solid",roundCorner:0},fillOpacity:0,backgroundOapcity:0},legend:{enabled:false,position:"",x:0,y:0,borderStyle:{enabled:false,stroke:"black",strokeOpacity:1,strokeWidth:0,roundCorner:0},legendItem:{label:{},borderStyle:{enabled:false,stroke:"black",strokeOpacity:1,strokeWidth:0,roundCorner:0},fillOpacity:0}},plot:{layout:{type:"mixed",rows:0,columns:0},fillOpacity:0,border:{},series:w}};var ae={chart:aN};function Y(i){this.fInit.apply(this,arguments)}Y.prototype={_super:null,eContainer:null,options:null,themeOpts:null,eChart:null,chartId:null,defs:null,fInit:function(i){this.svgSelection=typeof i==="string"?d3.select(i):i},fOptions:function(){if(!arguments.length){return this.options}else{this.options=arguments[0]}},fTheme:function(){if(!arguments.length){return this.themeOpts}else{this.themeOpts=arguments[0]}},fContainer:function(){if(!arguments.length){return this.eContainer}else{this.eContainer=arguments[0]}},fChart:function(){if(!arguments.length){return this.eChart}else{this.eChart=arguments[0]}},fChartId:function(){if(!arguments.length){return this.chartId}else{this.chartId=arguments[0]}},fDefs:function(){if(!arguments.length){return this.defs?this.defs:(this.defs=this.svgSelection.append("defs"))}else{this.defs=arguments[0]}}};var x=Z(null,null,{_super:null,fBeforeRendering:function(){},fAfterRendering:function(){}});var aD=Z(null,x,{_super:null,eContainer:null,chartContext:null,options:null,d3Sel:null,_CLASS_NAMES:"element",classNames:null,isRendered:false,fInit:function(be,bf,i){this.eContainer=be;this.chartContext=bf;this.options=i||{}},fApplyChange:function(i){if(!U.lazyRender){this.fRedraw()}return this},fRender:function(){this.fBeforeRendering.apply(this,arguments);this._fRender.apply(this,arguments);this.isRendered=true;this.fAfterRendering.apply(this,arguments);return this},_fRender:function(){return this},fRedraw:function(){if(this.fDestory()){this.fRender(this.d3Sel)}return this},fOptions:function(){if(!arguments.length){return this.options}else{this.options=arguments[0];return this.fApplyChange(this.fOptions)}},fX:function(){if(!arguments.length){return this.options&&this.options.x}else{if(this.options){this.options.x=arguments[0];if(this.isRendered){this.d3Sel.attr("x",this.options.x);return this}else{return this.fApplyChange(this.fX)}}}},fY:function(){if(!arguments.length){return this.options&&this.options.y}else{if(this.options){this.options.y=arguments[0];if(this.isRendered){this.d3Sel.attr("y",this.options.y);return this}else{return this.fApplyChange(this.fY)}}}},fWidth:function(){if(!arguments.length){return this.options&&this.options.width}else{if(this.options){this.options.width=arguments[0];return this.fApplyChange(this.fWidth)}}},fHeight:function(){if(!arguments.length){return this.options&&this.options.height}else{if(this.options){this.options.height=arguments[0];return this.fApplyChange(this.fHeight)}}},fClassNames:function(){if(!arguments.length){return this.classNames||this._CLASS_NAMES}else{this.classNames=arguments[0];if(this.isRendered){this.d3Sel.attr("class",this.classNames)}else{return this.fApplyChange(this.fClassNames)}}},fAttr:function(){var i=null;if(this.d3Sel){if(arguments.length===1){i=typeof arguments[0];if(i==="string"){return this.d3Sel.attr(arguments[0])}else{if(i==="object"){this.d3Sel.attr.apply(this,arguments)}}}else{if(arguments.length){this.d3Sel.attr.apply(this,arguments)}}}},fGetBBox:function(){return this.d3Sel?af(this.d3Sel.bbox()):{}},fDestory:function(){if(this.d3Sel){this.d3Sel.selectAll("*").remove();this.isRendered=false;return true}else{return false}}});function T(i){return typeof i==="number"}function aS(i){return typeof i==="stirng"}function ac(i){return typeof i==="funciton"}function z(i){return typeof i==="object"}function ao(i){return i*Math.PI/180}function o(bf,be){for(var i in bf){if(bf.hasOwnProperty(i)){bf[i]=be.call(bf,bf[i])}}return bf}function q(bf){if(bf===null||(typeof bf)!=="object"){return bf}var i=new bf.constructor();for(var be in bf){if(bf.hasOwnProperty(be)){i[be]=q(bf[be])}}return i}function af(bf){if(bf===null||(typeof bf)!=="object"){return bf}var i={};for(var be in bf){if(bf.hasOwnProperty(be)){i[be]=af(bf[be])}}return i}function bc(bf,be){if(!be&&bf._bbox){return bf._bbox}var i=(bf.nodeName==="g"||bf.nodeName==="text")?bf.getBBox():{x:0,y:0,width:0,height:0};bf._bbox={x:i.x,y:i.y,width:i.width,height:i.height};return bf._bbox}function m(be,i){if(!i){return be}if(!be){return q(i)}for(var bf in i){if(i.hasOwnProperty(bf)){if(i[bf]===null||(typeof i[bf])!=="object"){be[bf]=i[bf]}else{be[bf]=m(be[bf],i[bf])}}}return be}function aJ(be,i){var bf=null;if(!be){be={}}for(bf in i){if(i.hasOwnProperty(bf)){be[bf]=i[bf]}}return be}function Z(bf,i,bh){function be(bi,bk,bj){this._p={};if(this.fInit){this.fInit.apply(this,arguments)}return this}var bg=bf?bf:be;bg.prototype=i?new i():{};aJ(bg.prototype,bh);bg.prototype._super=i?i.prototype:null;return bg}function aA(bh,bg,bm){var bk,bi,bf,bn,be,bl;if(bg){bk=bh.getBBox();if(bm==="auto"){bl=""}else{bi=(bm==="start")?bk.x:(bm==="end")?bk.x+bk.width:(bk.x+bk.width/2);bf=bk.y+bk.height/2;bl=" "+bi+" "+bf}bn=bh.getAttribute("transform");if(bn){be=bn.split(/\)/g);if(be.length){bn="";for(var bj in be){if(be.hasOwnProperty(bj)){bn+=" "+(be[bj].indexOf("rotate")>=0)?"rotate("+bg+bl+")":be[bj].trim()+")"}}}}else{bn="rotate("+bg+bl+")"}bh.setAttribute("transform",bn)}return bh}function am(i,be,bf){return i.attr("transform",function(bh){var bk,bg,bn,bj=null,bm,bl;if(be){bk=this.getBBox();if(bf==="auto"){bl=""}else{bg=(bf==="start")?bk.x:(bf==="end")?bk.x+bk.width:(bk.x+bk.width/2);bn=bk.y+bk.height/2;bl=" "+bg+","+bn}bj=this.getAttribute("transform");if(bj){bm=bj.split(/\)/g);if(bm.length){bj="";for(var bi in bm){if(bm.hasOwnProperty(bi)){bj+=" "+(bm[bi].indexOf("rotate")>=0)?"rotate("+be+bl+")":bm[bi].trim()+")"}}}}else{bj="rotate("+be+bl+")"}}return bj})}function f(be,i,bh){if(arguments.length===1){var bf=[];be.each(function(){var bi=this.getAttribute("transform");if(bi&&bi.indexOf("translate")>=0){bi=bi.match(/translate\([0-9\s\.\-,]+\)/);if(bi&&bi.length){bi=bi[0].match(/([0-9\.\-]+)/g);if(bi&&bi.length&&bi.length>1){bf.push({x:bi[0],y:bi[1]})}}}});return bf}function bg(bi,bj){return typeof bi==="function"?bi(bj):bi}return be.attr("transform",function(bk){var bj=this.getAttribute("transform");if(bj&&bj.indexOf("translate")>=0){tranA=bj.split(/\)/g);if(tranA.length){bj="";for(var bi in tranA){if(tranA.hasOwnProperty(bi)&&tranA[bi].trim()!==""){bj+=" "+(tranA[bi].indexOf("translate")>=0)?"translate("+bg(i,bk)+","+bg(bh,bk)+")":tranA[bi].trim()+")"}}}}else{bj="translate("+bg(i,bk)+","+bg(bh,bk)+") "+(bj||"")}return bj})}function u(be){if(typeof be==="object"){for(var i in be){if(be.hasOwnProperty(i)){var bf=u(i);if(bf!==i){be[bf]=be[i];be[i]=null;delete be[i]}}}return be}else{return be?be.replace(/([A-Z])/g,function(bg,bh){return"-"+bh.toLowerCase()}):be}}function ak(i){return U.prefix+"-"+(i?(i+"-"):"")+(ah++)+"-"+Math.random().toString(2).slice(2)}var v={L:["0%","50%"],R:["100%","50%"],T:["50%","0%"],B:["50%","100%"],LT:["0%","0%"],TL:["0%","0%"],LB:["0%","100%"],BL:["0%","100%"],RT:["100%","0%"],TR:["100%","0%"],RB:["100%","100%"],BR:["100%","100%"]};function a0(i){var bf=i.parameters,be=null;if(i.type==="linearGradient"){bf=bf||["0%","0%","100%","100%"];if(typeof bf==="string"){be=bf.split(",");bf=[];bf[0]=v[be[0]][0];bf[1]=v[be[0]][1];bf[2]=v[be[1]][0];bf[3]=v[be[1]][1]}return{x1:bf[0],y1:bf[1],x2:bf[2],y2:bf[3]}}else{if(i.type==="radialGradient"){return{cx:bf[0],cy:bf[1],r:bf[2],fx:bf[3],fy:bf[4]}}}}function aH(bi,bk){var bj=null,bg=null,bl=null,bf=null,bh=0;if(typeof bi==="function"){return(function(bm){var i=bk?d3.merge(arguments,[bk]):arguments;return{value:bi.apply(bm,i)}})(this)}else{if(typeof bi==="object"){if(bi.type==="image"){bj=this.getBBox();bg=this.d3Sel.append("image").datum(bi);bg.attr({x:0,y:0,width:bj.width,height:bj.height,"xlink:href":bi.parameters&&bi.parameters[0]});return{value:(bi.indexOf("url")>=0)?bi:("#url("+bi+")"),imageNode:bg}}else{if(bi.type==="linearGradient"||bi.type==="radialGradient"){var be=bk.fDefs();bl=ak(bi.type);bf=be.append(bi.type).attr("id",bl).attr(a0(bi));for(bh=0;bh<bi.stops.length;bh++){bf.append("stop").attr(u({offset:bi.stops[bh].offset||"0%",stopColor:(bi.stops[bh].stopColor||(this.options&&this.options.fill)||"white"),stopOpacity:bi.stops[bh].stopOpacity||1}))}return{value:"url(#"+bl+")",gradientNode:bf}}}}else{return{value:bi}}}}function aC(be,bh,bg,bi){var bf;if(typeof bh==="function"){return(function(bj){var i=bi?d3.merge(arguments,[bi]):arguments;return{name:be,value:bh.apply(bj,i)}})(this)}else{bh=bh&&bh.toLowerCase();if(bh==="solid"){bh="none"}else{if(bh){bh=bh.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");bf=bh.length;while(bf--){bh[bf]=pInt(bh[bf])*bg}bh=bh.join(",")}}return{name:be,value:bh}}}function y(i){return i.strokeWidth||i.style["stroke-width"]||i.width||0}function F(be,bf){if(typeof be==="object"){be=u(be);for(var i in be){if(be.hasOwnProperty(i)){if(i==="roundCorner"){be.rx=be.rx||be.roundCorner;be.ry=be.ry||be.roundCorner}else{if(i==="dashStyle"){be[i]=aC.call(this,i,be[i],y(be),bf).value}else{if(i==="stroke"||i==="fill"){be[i]=aH.call(this,be[i],bf).value}}}}}}return be}function C(bf,bh,i,bj,be){if(i.fill||i.fillOpacity||i.fillOpacity===0){bh=bh||{};if(bh.enabled===false){delete bh.stroke;delete bh.strokeWidth;delete bh.strokeOpacity}bh.enabled=true;if(i.fill){bh.fill=i.fill}bh.fillOpacity=(i.fillOpacity===0)?i.fillOpacity:(i.fillOpacity||1);if(bh.stroke){bh.StrokeOpacity=(bh.StrokeOpacity===0)?bh.StrokeOpacity:(bh.StrokeOpacity||1)}}if(be){bh=be.apply(bf,[bh,bj])}if(bh&&bh.enabled){var bg=bf.style("fill"),bi;if(bg&&(bi=/url\(#[0-9a-zA-Z\-]+/i.exec(bg))){bj.fDefs().select(bi[0].substring(4)).remove()}bg=bf.style("stroke");bi=undefined;if(bg&&(bi=/url\(#[0-9a-zA-Z\-]+/i.exec(bg))){bj.fDefs().select(bi[0].substring(4)).remove()}bf.style(F.call(bf,bh,bj))}return bf}function a1(be,bf){if(typeof be==="object"){for(var i in be){if(be.hasOwnProperty(i)){if(i==="stroke"||i==="fill"){be[i]=aH.call(this,be[i],bf).value;be[i+"Opacity"]=(be[i+"Opacity"]===undefined)?1:be[i+"Opacity"]}}}be=u.call(this,be)}return be}function aq(bf,be,bg,i){be=i?i.apply(bf,[be,bg]):be;bf.style(a1.call(bf,be,bg));return bf}function aU(bf){if(typeof bf==="string"){var be=bf.split(/ /g);switch(be.length){case 1:return{top:be[0],right:be[0],bottom:be[0],left:be[0]};case 2:return{top:be[0],right:be[1],bottom:be[0],left:be[1]};case 3:return{top:be[0],right:be[1],bottom:be[2],left:be[1]};case 4:return{top:be[0],right:be[1],bottom:be[2],left:be[3]}}return{top:0,right:0,bottom:0,left:0}}else{var i=m({top:0,right:0,bottom:0,left:0},bf);return i}}function a3(be,i){if(!i){return be}for(var bf in i){if(i.hasOwnProperty(bf)){if(be[bf]){be[bf]+=i[bf]}else{be[bf]=i[bf]}}}return be}function P(bg,bf){var be=aU(bf),i=af(bg);i.y+=be.top;i.x+=be.left;i.width+=be.left+be.right;i.height+=be.top+be.bottom;return i}function aa(bi,bl,bk){var bg=typeof bi[0],bh=typeof bl,bj=(bk!==undefined),be=[],bf=0;if(bg==="number"||bg==="string"||bg==="boolean"){if(bj){if(bh==="number"&&bi.length>=bl){bi[bl]=bk.length&&bk[0]}}else{if(bh==="number"){be=(bi.length>=bl&&[bi[bl]])||[]}}}else{if(bg==="array"){for(bf=0;bf<bi.length;bf++){if(bj){aa(bi[bf],bl,bk[bf])}else{be.concat(aa(bi[bf],bl)||[])}}}else{if(bg==="object"){for(bf=0;bf<bi.length;bf++){if(bj){bi[bf][bl]=bk[bf]}else{be.concat(bi[bf][bl]||[])}}}}}return be}function a8(i,bf,be){if(!i.length){return[]}return aa(i,bf,be)}function A(be,bf){var i=a8(be,bf);return i?d3.extent(i):false}function b(bg,i){var bf=bg||0,be=i||1;return(typeof bf==="number")?(bf>=1?bf:Math.abs(be*bf)):(bf.indexOf("%")?(parseInt(bf,0)*be/100):bf)}function a2(i){return"."+i.replace(/\s/g,".")}var g={};function Q(be,i){g[be]=i}function aj(be,bf,i){return g[i.type]&&g[i.type].call(this,be,bf,i)}function J(bf,be,bi){var bj=null,bh,bg;if(!be){return bf}if(!bf){return q(be)}bi=bi||[];for(bj in be){if(be.hasOwnProperty(bj)){bi.push(bj);if(be[bj]===null||(typeof be[bj])!=="object"){bf[bj]=be[bj]}else{if(bj==="series"){if(!(bf[bj] instanceof Array)&&be[bj] instanceof Array){bg=bf[bj];bf[bj]=[];bh=be[bj].length;while(bh--){if(bg[be[bj][bh].type+"Series"]){bf[bj][bh]=J(q(bg[be[bj][bh].type+"Series"]),be[bj][bh],bi)}else{bf[bj][bh]=q(be[bj][bh])}}}else{if(bf[bj] instanceof Array&&!(be[bj] instanceof Array)){bh=bf[bj].length;while(bh--){bg=bf[bj];if(be[bj][bg.type+"Series"]){bf[bj][bh]=J(bf[bj][bh],be[bj][bg.type+"Series"],bi)}}}}}else{if(bj==="xAxis"&&!bf[bj]){bf[bj]=q(aT);bf[bj]=J(bf[bj],be[bj],bi)}else{if(bj==="yAxis"||bj==="bands"||bj==="ranges"||bj==="data"||bj==="targets"){if(!bf[bj]){if(bj==="yAxis"){bf[bj]=q(e)}else{if(bj==="bands"){bf[bj]=q(ar[bi[bi.length-1]]||{})}else{if(bj==="ranges"){bf[bj]=q(E[bi[bi.length-1]]||{})}else{if(bj==="targets"){if(bi.length>=2&&bi[bi.length-2]==="series"){bf[bj]=q(ad[bf.type+"Series"]||{})}}}}}}if(!bf[bj]){bf[bj]=q(be[bj])}else{if(!(bf[bj] instanceof Array)&&be[bj] instanceof Array){bg=bf[bj];bf[bj]=[];bh=be[bj].length;while(bh--){bf[bj][bh]=q(bg)}J(bf[bj],be[bj],bi)}else{bf[bj]=J(bf[bj],be[bj],bi)}}}else{bf[bj]=J(bf[bj],be[bj],bi)}}}}bi.pop()}}return bf}function aB(){var bg=[],be=0;function bf(){return bf.toString()}bf.push=function(i,bh){bg.push(i);be=1;while(be<arguments.length){bg.push(arguments[be]);be++}return bf};bf.toString=function(){return bg.join(" ")};return bf}function W(){var i=d3.svg.symbol();function be(){return i()}be.type=function(){if(!arguments.length){return i.type()}else{i.type(arguments[0])}return be};be.size=function(){if(!arguments.length){return i.size()}else{i.size(arguments[0])}return be};return be}function h(be,bg,bf){function bi(bn){var bm=Math.abs(bn),bl=-1;if(bm===1){return 0}else{if(bm>1){while(bm>1){bm=bm/10;bl++}return Math.pow(10,bl)}else{if(bm<1){while(bm<1){bm=bm*10;bl++}return Math.pow(10,-bl)}}}}var bj=d3.extent(bf),bk=bi(bj[0]),bh=0;if(be.scale&&be.scale.min!==undefined){bj[0]=be.scale.min}else{bj[0]=bk===0?0:(bk>1?(bj[0]-bj[0]%bk)-bk:Math.floor((bj[0]-bk)/bk)*bk)}if(be.scale&&be.scale.max!==undefined){bj[1]=be.scale.max}else{bj[1]=bk===0?0:(bk>1?(bj[1]-bj[0]%bk)+bk:Math.floor((bj[0]+bk)/bk)*bk)}if(be.bands){for(bh in be.bands){bj[0]=be.bands[bh].x1<bj[0]?be.bands[bh].x1:bj[0];bj[1]=be.bands[bh].x2>bj[1]?be.bands[bh].x2:bj[1]}}if(bg){for(bh in bg){bj[0]=bg[bh].x1<bj[0]?bg[bh].x1:bj[0];bj[1]=bg[bh].x2>bj[1]?bg[bh].x2:bj[1]}}if(be.reverse===true){bh=bj[0];bj[0]=bj[1];bj[1]=bh}return bj}function I(bg,i,bf,bk,be){var bh=b(i.size,bf),bj=W().type(i.type).size(bh*bh),bi=bg.selectAll(aK.FN.path).data([i]);bi.enter().append("path").attr("class",aK.marker);bi.attr("d",bj());C(bi,i.border,i,bk,be);return bi}function a4(be,i,bg,bf){var bh=be.selectAll(aK.FN.label).data([i]);bh=(bh.enter().append("g").attr("class",aK.label),bh),border=bh.selectAll(aK.FN.border).data([i]),border=(border.enter().append("rect").attr("class",aK.border),border),textUpdate=bh.selectAll("text").data([i.text]);textUpdate=(textUpdate.enter().append("text").text(bg||i.text),textUpdate),bbox=null,textAnchor=i.font&&(i.font.textAnchor||i.font["text-anchor"]);C(border,i.border,i,bf);aq(textUpdate,i.font,bf).attr("dy",".8em");bbox=bc(bh.node());border.attr({x:(textAnchor==="middle"?-(bbox.width/2):(textAnchor==="end"?-bbox.width:0)),y:0,width:bbox.width,height:bbox.height});return bh}function n(bg,bo,bv,bw,bs){var bx=bv.domain(),bp=bv.range(),bu=bo.x1?bo.x1:bx[0],bt=bo.x2?bo.x2:bx[1],bf=bo.y1?b(bo.y1,bw.height):0,be=bo.y2?b(bo.y2,bw.height):bw.height,bq=bo.round,bh=(bo.type==="line")?"line":((bq>0&&(bu===bx[0]||bt===bx[1]))?"path":"rect"),bi=(bq>0&&bu===bx[0]&&bf===0&&be===bw.height),bj=(bq>0&&bt===bx[1]&&bf===0&&be===bw.height),bk=null,bl=null,i=null,bn=bg.selectAll(aK.FN.border).data([bo]);bn.enter().append(bh).attr("class",aK.border);bu=bv(bu);bt=bv(bt);if(bh==="line"){bn.attr({x1:bu,x2:bt,y1:bf,y2:be})}else{if(bh==="rect"){bn.attr({x:bu,y:bf,width:bt-bu,height:be-bf})}else{if(bh==="path"){var br=(bi?("M"+bu+" "+(bf+bq)+" a"+bq+","+bq+" 0 0,1 "+bq+","+(-bq)):(" M"+bu+" "+bf+" l"+bq+" "+0))+" L"+(bt-bq)+" "+bf+(bj?(" a"+bq+","+bq+" 0 0,1 "+bq+","+bq):(" l"+bq+" "+0+" l"+0+" "+bq))+" L"+bt+" "+(be-bq)+(bj?(" a"+bq+","+bq+" 0 0,1 "+(-bq)+","+bq):(" l"+0+" "+bq+" l"+(-bq)+" "+0))+(bi?(" L"+(bu+bq)+" "+be+" a"+bq+","+bq+" 0 0,1 "+(-bq)+","+(-bq)):(" L"+bu+" "+be+" l"+0+" "+(-bq)))+" Z";bn.attr("d",br)}}}C(bn,bo.border,bo,bs);if(bo.marker&&bo.marker.enabled!==false){bk=I(bg,bo.marker,bw.height,bs);f(bk,bu,(bo.markerPosition==="below")?be:bf)}if(bo.label&&bo.label.enabled!==false){bl=a4(bg,bo.label,(bo.label.text?bo.label.text:(bt?("["+bu+","+bt+"]"):bu)),bs);i=bl.node().getBBox();var bm=0;if(bk){bm+=(bo.markerPosition==="below")?be:bf;bm+=(bo.labelPosition==="below")?bo.marker.size/2:(-bo.marker.size-i.height)}else{bm=(bo.labelPosition==="below")?be:bf-i.height}f(bl,bu,bm)}return bg}function c(bf,bg,be,i){bf.each(function(bh,bi){return n(d3.select(this),bh,bg,be,i)});return bf}function av(i,bg,bh,bf,be){return n(i,bg,bh,bf,be)}function at(bg,bf,be,i){return c(bg,bf,be,i)}function k(bg,bf,bh,be){var i=bg.selectAll(aK.FN.border).data([bf]);i.enter().append("rect").attr("class",aK.border);C(i,bf.border,bf,bh,be);return i}function V(i,be){return i}var B=Z(null,aD,{_CLASS_NAMES:aK.label,_fRender:function(i){var be=this;context=this.ChartContext,opts=this.options,paddingOpts=aU(opts.padding),format=opts.format,xOffset=opts.xOffset||0,yOffset=opts.yOffset||0,bbox=null,borderUpdate=null,textUpdate=null;this.d3Sel=i;i.each(function(bi,bf){var bg=d3.select(this),bh=opts.text||bi;if(!bg.attr("class")){bg.attr("class",be.fClassNames())}if(opts.enabled===false){return this}if(opts.fill&&opts.border){borderUpdate=k(bg,opts,context)}textUpdate=bg.selectAll("text").data([opts]);textUpdate.enter().append("text");textUpdate.text(typeof format==="function"?format.call(this,bh):V(bh,format));textUpdate.call(aq,opts.font,context).attr({x:xOffset,y:yOffset,dy:".8em"});bbox=bg.bbox(true);if(borderUpdate){borderUpdate.attr({x:xOffset,y:yOffset,width:paddingOpts.left+bbox.width+paddingOpts.right,height:paddingOpts.top+bbox.height+paddingOpts.bottom})}f(textUpdate,paddingOpts.left,paddingOpts.top);if(opts.anchor==="middle"){textUpdate.attr("x",xOffset-bbox.width/2);if(borderUpdate){borderUpdate.attr("x",xOffset-(paddingOpts.left+bbox.width+paddingOpts.right)/2)}}else{if(opts.anchor==="end"){textUpdate.attr("x",xOffset-bbox.width);if(borderUpdate){borderUpdate.attr("x",xOffset-(paddingOpts.left+bbox.width+paddingOpts.right))}}}if(opts.rotation){bg.call(am,opts.rotation,opts.rotationAnchor)}});return this},fLabelFromat:function(){if(!arguments.length){return this.options.format}else{this.options.format=arguments[0];return this.fApplyChange(this.fLabelFormat)}}});var aM={value:0,width:0,digitCount:3,negative:false,decimals:0,gap:130,fill:"black",fillOpacity:0.15};var O=Z(null,aD,{value:null,digits:[0],_scale:null,_dispUpdate:null,_fRender:function(){var bh=0,bj=this.options,bi=bj.width,bf=bj.digitCount,bl=bj.gap,bg=this._scale,bk=(this.d3Sel=this.d3Sel||this.eContainer.d3Sel.append("g").attr("class",aK.ledLabel));this.digits=new Array(bf);for(bh=0;bh<bf;bh++){this.digits[bh]=0}bg=this._scale=bi/(bl*bf+50);var be=bk.selectAll(".digit").data(this.digits);this._dispUpdate=(be.enter().append("g").attr("class","digit"),d3.transition(be));this._dispUpdate.attr("transform",function(bn,bm){return"translate("+(bi-bl*bg*bm-80*bg)+", "+(20*bg)+")"}).call(an,bg);if(bj.fill){this._dispUpdate.style({fill:aH.call(this._dispUpdate,bj.fill,this.chartContext).value,"fill-opacity":bj.fillOpacity||0.000001})}return this.fValue(bj.value||0)},fValue:function(bi){var bg=this.options,i=bg.decimals,bf=bg.negative,bh=this.digits;if(!arguments.length){return bg.value}bg.value=bi;var be=Math.round(Math.abs(bi)*Math.pow(10,i));this._dispUpdate.each(function(bl,bj){var bk=d3.select(this);if(!bf&&bi<0){bh[bj]=-1;j(bk,10,false);return}bh[bj]=be%10;j(bk,bh[bj],(bj==i));if(be<10&&bj>=i){if(bf&&be==-1&&bi<0&&bj>i){bh[bj]=-1;j(bk,10,false);bi=-bi}else{be=-1}}else{be=Math.floor(be/10)}});this._dispUpdate.selectAll(".off").style("fill-opacity",bg.fillOpacity||0.000001);this._dispUpdate.selectAll(".on").style("fill-opacity",1);return this},fDigitCount:function(be){if(!arguments.length){return this.options.digitCount}else{this.options.digitCount=be;this.digits=new Array(this.options.digitCount);for(var bf=0;bf<this.options.digitCount;bf++){this.digits[bf]=0}return this.fApplyChange(this.fDiditCount)}},fDecimals:function(i){if(!arguments.length){return this.options.decimals}else{this.options.decimals=i;return this.fApplyChange(this.fDecimals)}},fWidth:function(i){if(!arguments.length){return this.options.width}else{this.options.width=i;return this.fApplyChange(this.fWdith)}},fNegative:function(i){if(!arguments.length){return this.options.negative}else{this.options.negative=i;return this.fApplyChange(this.fNegative)}},fGap:function(i){if(!arguments.length){return this.options.gap}else{this.options.gap=i;return this.fApplyChange(this.fGap)}}});function an(bi,bg){var bq=40*bg;var i=10*bg;var bn=10*bg;var bf=2*bg;var bh=10*bg;var br=aw(bi,0,0,bq,i,bn,bf,0);var bp=aw(bi,35*bg,42*bg,bq,i,bn,-bf,100);var bo=aw(bi,21*bg,126*bg,bq,i,bn,-bf,100);var bm=aw(bi,-28*bg,168*bg,bq,i,bn,bf,0);var bl=aw(bi,-62*bg,126*bg,bq,i,bn,-bf,100);var bk=aw(bi,-48*bg,42*bg,bq,i,bn,-bf,100);var bj=aw(bi,-14*bg,84*bg,bq,i,bn,bf,0);var be=bi.append("circle").attr("cx",32*bg).attr("cy",175*bg).attr("r",bh).attr("class","off").style("stroke","none");return[br,bp,bo,bm,bl,bk,bj,be]}function aw(bh,be,bk,bg,bf,i,bj,bi){return bh.append("path").attr("d","M"+(be+bg)+" "+bk+"L"+(be+bg-bf+bj)+" "+(bk-i)+"L"+(be-bg+bf+bj)+" "+(bk-i)+"L"+(be-bg)+" "+(bk)+"L"+(be-bg+bf-bj)+" "+(bk+i)+"L"+(be+bg-bf-bj)+" "+(bk+i)).attr("transform",function(){return"rotate("+bi+" "+be+" "+bk+")"}).attr("class","off").style("stroke","none")}function j(bg,bf,i){var be=[];switch(bf){case 1:be=[0,1,1,0,0,0,0];break;case 2:be=[1,1,0,1,1,0,1];break;case 3:be=[1,1,1,1,0,0,1];break;case 4:be=[0,1,1,0,0,1,1];break;case 5:be=[1,0,1,1,0,1,1];break;case 6:be=[1,0,1,1,1,1,1];break;case 7:be=[1,1,1,0,0,0,0];break;case 8:be=[1,1,1,1,1,1,1];break;case 9:be=[1,1,1,1,0,1,1];break;case 0:be=[1,1,1,1,1,1,0];break;case 10:be=[0,0,0,0,0,0,1];break;default:be=[0,0,0,0,0,0,0]}bg.selectAll("*").each(function(bi,bh){d3.select(this).attr("class",(bh<7&&be[bh])||(bh==7&&i)?"on":"off")})}function ba(bf,bg,i,be){this._p={};if(this.fInit){this.fInit.apply(this,arguments)}return this}Z(ba,aD,{_CLASS_NAMES:aK.chart,themeOpts:null,eTitle:null,eLegend:null,eXAxis:null,eYAxis:[],ePlot:null,eSeries:[],defs:null,innerBounds:null,outerBounds:null,fInit:function(bf,i,be){this._super.fInit.call(this,{},bf,i,be);this.chartContext.eContainer=this.eContainer;this.chartContext.options=this.options;this.chartContext.themeOpts=this.themeOpts=be;this.chartContext.eChart=this},_fRender:function(bo){var bg=this._p,bl=this,be=this.chartContext.jointOpts=bl.jointOpts=J(J(q(ae),this.themeOpts),this.options),bs=(be&&be.chart)?be.chart:{},bf=bs.title||{},bp=bs.title.position,i=null,bn=null,bk=null,bm=bs.lengend||{},br=bs.plot||{},bj=null,bh=this.innerBounds,bq=null;bq=typeof bo;if(bq==="string"){this.eContainer.d3Sel=d3.select(bo)}else{if(bq==="function"){this.eContainer.d3Sel=bq()}else{this.eContainer.d3Sel=bo}}this.chartContext.chartId=this.eContainer.d3Sel.attr("id");bs.width=bs.width||parseInt(this.eContainer.d3Sel.attr("width"),0);bs.height=bs.height||parseInt(this.eContainer.d3Sel.attr("height"),0);this.chartContext.svgSelection=bj=bg.svg=this.eContainer.d3Sel.append("svg");bj.attr("class",this.chartContext.chartId+" "+aK.svg+" "+this.fClassNames());bj.attr({width:bs.width,height:bs.height});bl.outerBounds={x:0,y:0,width:bs.width,height:bs.height};bl.innerBounds=q(bl.outerBounds);bl.d3Sel=bl.d3Sel||bj.selectAll(aK.FN.chart).data([bs]).enter().append("g");bl.d3Sel.attr("class",aK.chart);var bi=aU(bs.margin);bl.innerBounds.x+=bi.left;bl.innerBounds.width-=(bi.left+bi.right);bl.innerBounds.y+=bi.top;bl.innerBounds.height-=(bi.top+bi.bottom);bh=this.innerBounds;bf.rotation=bf.rotation?bf.rotation:((bp==="top"||bf==="bottom")?0:-90);bl.eTitle=new H(bl,bl.chartContext,bf);if(bf.enabled){bl.title.fRender(bl.d3Sel);i=bl.title.getBBox();if(bp==="top"){bn=bh.x;bk=bh.y;bh.y+=i.height;bh.height-=i.height}else{if(bp==="bottom"){bn=bh.x;bk=bh.y-i.height;bh.height-=i.height}else{if(bp==="left"){bn=bh.x;bk=bh.y;bh.x+=i.width;bh.width-=i.width}else{if(bp==="right"){bn=bh.x+bh.width-i.width;bk=bh.y;bh.width-=i.width}}}}bl.title.fX(bn).fY(bk)}m(bs.legend,bh);bl.eLegend=new a9(bl,bl.chartContext,bm);if(bm.enabled){bl.eLegend.fRender(bl.d3Sel)}m(bs.plot,bh);bl.ePlot=new l(bl,bl.chartContext,br);bl.ePlot.fRender(bl.d3Sel);this.eSeries=bl.ePlot.eSeries;bl._super._fRender.apply(bl,arguments);return this},fTheme:function(){if(!arguments.length){return this.theme}else{this.theme=arguments[0];return this.fApplyChanged(this.fTheme)}},fWidth:function(){if(!arguments.length){return(this.options&&this.options.chart.width)?this.options.chart.width:(isRendered?this.getBBox().width:undefined)}else{if(this.options&&this.options.chart.width!==arguments[0]){this.options.chart.width=arguments[0];return this.fApplyChanged(this.fWidth)}}},fHeight:function(){if(!arguments.length){return(this.options&&this.options.chart.height)?this.options.chart.height:(isRendered?this.getBBox().height:undefined)}else{if(this.options&&this.options.chart.height!==arguments[0]){this.options.chart.height=arguments[0];return this.fApplyChanged(this.fHeight)}}},fTitle:function(){if(!arguments.length){return this.eTitle}else{return this.fApplyChanged(this.fTitle)}},fSeries:function(){var bi=null,bf,bj=[],bh;if(!arguments.length){return this.eSeries}if(typeof arguments[0]==="string"){bi=arguments[0];bh=(this.isRendered)?this.eSeries:this.options.chart.plot.series;bf=bh.length;while(bf--){if(bh[bf].type===bi){bj.push(bh[bf])}}return bj}else{if(arguments[0] instanceof Array){if(arguments[1]){return this.fApplyChange(this.fSeries)}else{if(arguments[0].lenght===0){return this.eSeries}else{var bg=[];for(var be in arguments[0]){if(this.eSeries[be]){bg.push(this.eSeries[be])}}return bg.reverse()}}}}return this}});var H=Z(null,B,{_CLASS_NAMES:aK.title,_fRender:function(){var i=this.options,bj=i.x,bi=i.y,bk=i.width,bg=i.height,be=i.margin,bh=i.vAlign,bf=i.hAlign,bl=null,bn=null,bm=null;if(!i.enabled){return this}this.d3Sel=this.eContainer.d3Sel.append("g").attr("class",this.fClassNames());bl=this._super.fRender.apply(this.d3Sel,arguments).fGetBBox();be=aU(be);bl=P(bl,be);if(bk){if(bl.width<bk){if(bf==="left"){bn=bj+be.left}else{if(bf==="middle"){bn=(bk-bl.width)/2-be.left}else{if(bf==="right"){bn=bk-bl.width-be.right}}}}}else{bk=bl.width}if(bg){if(bl.height<bg){if(bh==="top"){bm=bi+be.top}else{if(bh==="middle"){bm=(bg-bl.height)/2-be.top}else{if(bh==="bottom"){bm=bg-bl.height-be.bottom}}}}}else{bg=bl.height}if(bn||bm){f(this.d3Sel,bn||bj,bm||bi)}}});var S=Z(null,aD,{_CLASS_NAMES:aK.axis,scale:null,tickValues:null,fInit:function(){this._super.fInit.apply(this,arguments);this.scale=d3.scale.linear()},_fRender:function(bu){var br=this,bo=this._p,be=this.chartContext,bl=this.options,bj=bl.label,bq=bl.axisLine,bk=bl.orient,bm=bl.tick,bs=bm.scaleOpts,bf=bm.scale.stepNumber||10,bi=bj&&bj.format,bv=bm.major.size,bh=bv,bp=bm.minor.size,bt=bm.padding,bn=bm.minor.count||3,bw=this.scale,i=this.tickValues,bg=false;this.d3Sel=bu;bu.transition().each(function(bT,bN){var bQ=d3.select(this).attr("class",br.fClassNames());if(bl.enabled===false){return}if(bk==="top"||bk==="bottom"){bw.range([0,bl.width])}else{bw.range([bl.height,0])}var bM=this.__scale__||bw,bL=this.__scale__=bw.copy();var bS={stroke:aH(bm.major.stroke,be).value,"stroke-opacity":bm.major.strokeOpacity,"stroke-width":bm.major.strokeWidth},bV=(i===null)?(bL.ticks?bL.ticks.apply(bL,[bf]):bL.domain()):i,bP=bQ.selectAll(aK.FN.tick+aK.FN.major).data(bV,bL),bG=bP.enter().insert("g",".domain").attr("class",aK.tick+" "+aK.major).style("opacity",0.000001),bJ=d3.transition(bP.exit()).style("opacity",0.000001).remove(),bC=d3.transition(bP).style("opacity",1),bx=null,bR=String;if(bi&&bo.labelFormat==bi){bR=bo.labelFormat}else{if(typeof bi==="function"){bR=bo.labelFormat=bi}else{if(typeof bi==="string"){bR=bo.labelFormat=bL.tickFormat?bL.tickFormat.apply(bL,[bf],bi):String}else{bR=bo.labelFormat=bL.tickFormat?bL.tickFormat.apply(bL,[bf]):String}}}if(bm.minor&&bm.minor.enabled!==false){var bO={stroke:aH(bm.minor.stroke,bF).value,"stroke-opacity":bm.minor.strokeOpacity,"stroke-width":bm.minor.strokeWidth},bB=ay(bw,bV,bn),bA=bQ.selectAll(aK.FN.tick+aK.FN.minor).data(bB,String),bK=bA.enter().insert("line",".tick").attr("class",aK.tick+" "+aK.minor).style(bO),bI=d3.transition(bA.exit()).style({"stroke-opacity":0.000001}).remove(),by=d3.transition(bA).style(bO);bg=true}var bF=bb(bL),bH=bQ.selectAll(aK.FN.domain).data([0]),bW=(bH.enter().append("path").attr("class",aK.domain).style("fill","none"),d3.transition(bH));bG.append("line").style("fill","none");bG.append("text");var bz=bG.select("line"),bU=bC.select("line");text=bP.select("text").text(bR),line=bP.select("line").style(bS),textEnter=bG.select("text");textUpdate=bC.select("text"),textBBox=null,majorOffset=null,minorOffset=null,labelOffset=null,axisPath=null;ag(bl);majorOffset=N(bm.major,bv,bk);minorOffset=N(bm.minor,bp,bk);labelOffset=L(bj,bk,bm.major.style,bm.major.size,bt);axisPath=p(bk,bm.major.style,bh,bF);if(bk==="top"||bk==="bottom"){bx=t;bz.attr("y1",majorOffset[0]).attr("y2",majorOffset[1]);textEnter.attr("y",labelOffset[0]);bU.attr("x2",0).attr("y1",majorOffset[0]).attr("y2",majorOffset[1]);textUpdate.attr("x",0).attr("y",labelOffset[0]);text.attr("dy",labelOffset[1]).style("text-anchor","middle");if(bg){bK.attr("y1",minorOffset[0]).attr("y2",minorOffset[1]);by.attr("x2",0).attr("y1",minorOffset[0]).attr("y2",minorOffset[1])}bW.attr("d",axisPath)}else{if(bk==="left"||bk==="right"){bx=s;bz.attr("x1",majorOffset[0]).attr("x2",majorOffset[1]);textEnter.attr("x",labelOffset[0]);bU.attr("x1",majorOffset[0]).attr("x2",majorOffset[1]).attr("y2",0);textUpdate.attr("x",labelOffset[0]).attr("y",0);text.attr("dy",labelOffset[1]).style("text-anchor",(X(bk,bj.position)==="left"?"end":"start"));if(bg){bK.attr("x1",minorOffset[0]).attr("x2",minorOffset[1]);by.attr("x1",minorOffset[0]).attr("x2",minorOffset[1]).attr("y2",0)}bW.attr("d",axisPath)}}if(bj){aq(text,bj.font,be);if(bj.rotation){am(textEnter,bj.rotation,bj.rotationAnchor)}}textBBox=text.bbox();if(bq&&bq.enabled!==false){bW.style(u(bq))}if(bL.rangeBand){var bE=bL.rangeBand()/2,bD=function(bX){return bL(bX)+bE};bG.call(bx,bD);bC.call(bx,bD)}else{bG.call(bx,bM);bC.call(bx,bL);bJ.call(bx,bL);if(bg){bK.call(bx,bM);by.call(bx,bL);bI.call(bx,bL)}}});return this},fScale:function(){if(!arguments.length){return this.scale}else{this.scale=arguments[0];return this.fApplyChange(this.fScale)}},fScaleDomain:function(){if(!arguments.length){return this.scale.domain()}else{this.scale.domain(arguments[0]);return this.fApplyChange(this.fScaleDomain)}},fTickValues:function(){if(!arguments.length){return this.tickValues}else{this.tickValues=arguments[0];return this.fApplyChange(this.fTickValues)}}});function a7(be){var bf=be[0],i=be[be.length-1];return bf<i?[bf,i]:[i,bf]}function bb(i){return i.rangeExtent?i.rangeExtent():a7(i.range())}function N(bf,be,i){if(i==="top"||i==="bottom"){return[(bf.style==="cross")?-be:0,(bf.style==="above")?-be:((!bf.style&&i==="top")?-be:be)]}else{return[(bf.style==="cross")?-be:0,(bf.style==="left")?-be:((!bf.style&&i==="left")?-be:be)]}}function ag(be,i){if(be.label){be.label.position=X(be.orient,be.label.position)}be.tick.major.style=X(be.orient,be.tick.major.style);if(be.tick.minor){be.tick.minor.style=X(be.orient,be.tick.minor.style)}}function X(be,i){if(i==="corss"){return i}if(be==="top"){return i==="left"?"below":(i==="right"?"top":i)}else{if(be==="bottom"){return i==="right"?"above":(i==="left"?"below":i)}else{if(be==="left"){return i==="above"?"right":(i==="below"?"left":i)}else{if(be==="right"){return i==="below"?"left":(i==="above"?"right":i)}else{return i}}}}}function L(bh,bf,i,bg,bi){var be=X(bf,i);if(bh.position==="same"){bh.position=be}else{if(bh.position==="opposite"){bh.position=(be==="cross")?((bf==="top")?"below":(bf==="bottom"?"above":bf==="left"?"right":"left")):((be==="below")?"above":(be==="above"?"below":be==="left"?"right":"left"))}}if(bh.position==="cross"){bh.position=(bf==="top")?"above":(bf==="bottom"?"below":bf==="left"?"left":"right")}if(bf==="bottom"||bf==="top"){if(bh.position==="above"){return[((be!=="below")?-Math.max(bg,0):0)-bi,"0em"]}else{return[((be!=="above")?Math.max(bg,0):0)+bi,".8em"]}}else{if(bf==="left"||bf==="right"){if(bh.position==="left"){return[((be!=="right")?-Math.max(bg,0):0)-bi,".32em"]}else{return[((be!=="left")?Math.max(bg,0):0)+bi,".32em"]}}}}function p(bf,i,bg,be){if(bf==="top"||bf==="bottom"){return"M"+be[0]+",0 H"+be[1]}else{if(bf==="left"||bf==="right"){return"M"+be[0]+",0 V"+be[1]}}}function t(be,i){be.attr("transform",function(bf){return"translate("+i(bf)+",0)"})}function s(i,be){i.attr("transform",function(bf){return"translate(0,"+be(bf)+")"})}function ay(bg,bk,bf){var bl=[];if(bf&&bk.length>1){var bn=a7(bg.domain()),bi=-1,be=bk.length,bj=(bk[1]-bk[0])/++bf,bh,bm;while(++bi<be){for(bh=bf;--bh>0;){if((bm=+bk[bi]-bh*bj)>=bn[0]){bl.push(bm)}}}for(--bi,bh=0;++bh<bf&&(bm=+bk[bi]+bh*bj)<bn[1];){bl.push(bm)}}return bl}var a9=Z(null,aD,{_CLASS_NAMES:aK.legend,fRender:function(){}});var l=Z(null,aD,{_CLASS_NAMES:aK.plot,eSeries:null,fInit:function(){this._super.fInit.apply(this,arguments);this.eSeries=[]},_fRender:function(){var bj=this.chartContext,be=this.options,bm=be.x,bl=be.y,bn=be.width,bi=be.height,bg=0,bh=null,bf;if(be.layout.type==="mixed"){}else{if(be.layout.type==="grid"){}}this.d3Sel=this.d3Sel||this.eContainer.d3Sel.append("g").datum(be).attr({x:bm,y:bl,"class":this.fClassNames()});f(this.d3Sel,bm,bl);bf=this.d3Sel.append("rect").attr({x:0,y:0,wdith:bn,height:bi}).datum(be.border);C(bf,be.border,be,bj);bg=be.series.length;while(bg--){serieOpts=be.series[bg];serieOpts.x=bm;serieOpts.y=bl;serieOpts.width=bn;serieOpts.height=bi;var bk=this.chartContext.options.chart.colorPalette.length;serieOpts.fill=serieOpts.fill||this.chartContext.options.chart.colorPalette[bg%bk];this.eSeries.push(bh=aj.call(this,this,this.chartContext,serieOpts));bh.fRender()}}});var a={type:"dial",startAngle:-90,endAngle:90,fillOpacity:0,border:{enabled:false,stroke:"white",strokeOpacity:0,strokeWidth:0},dialArc:{enabled:true,radius:"80%",innerRadius:"70%",fillOpacity:0,border:{enabled:false,stroke:"white",strokeOpacity:0.000001,strokeWidth:0}},value:{enabled:false,font:{},fillOpacity:0,border:{}},ranges:[],indicator:{fill:"red",fillOpacity:1,body:{headRadius:"80%",headSize:"1%",pivotSize:"5%",tailRadius:"20%",tailSize:"2%",fill:"red",fillOpacity:1,border:{}},pivotMarker:{enabled:true,type:"circle",size:"5%",fill:"black",fillOpacity:1,border:{stroke:"red",strokeWidth:"5%"}}}};w.dialSeries=a;Q("dial",function(i,bf,be){be.axis=q(bf.jointOpts.chart.yAxis[be.axisIndex||0]);return new aZ(i,bf,be)});var aZ=Z(null,aD,{type:"dial",_CLASS_NAMES:aK.dialSeries+" "+aK.series,eAxis:null,dialArc:null,indicatorUpdate:null,valueLabel:null,ranges:[],cx:0,cy:0,pPointerUpdate:null,pRange:null,pExtent:null,pInvert:null,pComp:null,pCursorArc:null,pCursorUpdate:null,pCurrentValue:null,pCurrentRad:null,pLastEvent:null,pOnValueChanged:null,pLastAngle:null,arcFactor:0.5,_fRender:function(){var bv=this.chartContext,bq=this.options,br=bq.indicator,bh=bq.value,i=bq.ranges,bo=bq.x,bn=bq.y,bt=bq.width,bs=bq.height,bi=(bq.dialArc.radius=b(bq.dialArc.radius,d3.extent([bt/2,bs/2])[0])),bl=(bq.dialArc.innerRadius=b(bq.dialArc.innerRadius||bq.radius,bi)),bg=(this.cx=bt/2),be=(this.cy=bs/2),bk=null,bu=this.eAxis;bq.dialArc.radius=bi;bq.dialArc.innerRadius=bl;bu=this.eAxis=new aY(this,bv,bq).fX(bg).fY(be);this.eAxis.fScale().range([ao(bq.startAngle),ao(bq.endAngle)]);this.pRange=d(bu.fScale());this.pExtent=ap(bu.fScale());this.pInvert=(this.pRange[0]>this.pRange[1])?true:false;this.pComp=2*Math.PI-Math.abs(this.pRange[1]-this.pRange[0]);this.pComp=this.pComp<0?0:this.pComp;bk=this.d3Sel=this.d3Sel||this.eContainer.d3Sel.append("g").datum(bq).attr("class",this.fClassNames());f(bk,bo||0,bn||0);var bw=bk.append("circle").attr("class",aK.border).attr({cx:bg,cy:be,r:bi}).style({"fill-opacity":0.000001});C(bw,bq.border,bq,bv);var bm=bk.selectAll(aK.FN.dialArc).data([bq]),bp=(bm.enter().append("g").attr("clsss",aK.dialArc),d3.transition(bm));this.dialArc=bp;f(bp,bg,be);bp.append("path").attr("class","lane").style("fill-opacity",0.000001).attr("d",d3.svg.arc().startAngle(this.pExtent[0]).endAngle(this.pExtent[1]).innerRadius(bl).outerRadius(bi));this.pCursorArc=d3.svg.arc().startAngle(this.pRange[0]).endAngle(this.pRange[1]).innerRadius(bl).outerRadius(bi);bp.append("path").attr("class","cursor").style("fill-opacity",0.000001).attr("d",this.pCursorArc);this.pCursorUpdate=bp.selectAll(".cursor");C(bp.selectAll("path"),bq.dialArc.border,bq.dialArc,bv);var bx=bk.append("g").attr("class",aK.ranges).selectAll(aK.FN.range).data(i),bf=(bx.enter().append("g").attr("class",aK.range),d3.transition(bx)),bj=d3.transition(bx.exit()).style("fill-opacity",0.000001).remove();bu.fRender();f(bf,bg,be).each(function(by,bA){var bz=d3.select(this).append("path").attr("class",aK.range+" "+(by.name||bA)).attr("d",d3.svg.arc().startAngle(au(bu.fScale(),by.startValue)).endAngle(au(bu.fScale(),by.endValue)).innerRadius((by.innerRadius=b(by.innerRadius,bi))).outerRadius((by.radius=b(by.radius,bi))));C(bz,by.border,by,bv)});this.pPointerUpdate=(function(){var bI=bk.selectAll(aK.FN.indicator).data([br]),bG=(bI.enter().append("g").attr("class",aK.indicator),d3.transition(bI)),bB=br.body,bJ=br.headMarker,bF=br.pivotMarker,bE=br.tailMarker,by,bK=aB(),bD=null,bH=null,bA=null,bC=null;function bz(bL,bM){(bL&&bL.strokeWidth)?bL.strokeWidth=(bL.strokeWidth=b(bL.strokeWidth,bi)):null;return bL}bB.headRadius=b(bB.headRadius,bi);bB.headSize=b(bB.headSize,bi);bB.pivotSize=b(bB.pivotSize,bi);bB.tailRadius=b(bB.tailRadius,bi);bB.tailSize=b(bB.tailSize,bi);by=f(bG,bg,be).append("g").attr("class",aK.pointer);if(br.fill){by.style({fill:br.fill||"red","fill-opacity":br.fillOpacity||0.000001})}bK.push("M",-bB.pivotSize/2,0);bK.push("L",-bB.headSize/2,-bB.headRadius);bK.push("L",bB.headSize/2,-bB.headRadius);bK.push("L",bB.pivotSize/2,0);bK.push("L",bB.tailSize/2,bB.tailRadius);bK.push("L",-bB.tailSize/2,bB.tailRadius);bK.push("Z");bD=by.append("path").datum(bB).attr("class","body").attr("d",bK());C(bD,bB.border,bB,bv);if(bF&&bF.enabled){bF.size=b(bF.size,bi);bK=W().type(bF.type).size(bF.size*bF.size);bC=by.append("path").datum(bF).attr("class","pivot").attr("d",bK());C(bC,bF.border,bF,bv,bz)}if(bJ&&bJ.enabled){bJ.size=b(bJ.size,bi);bK=W().type(bJ.type).size(bJ.size*bJ.size);bH=by.append("path").datum(bJ).attr("class","head").attr("d",bK());f(bH,0,-bB.headRadius);C(bH,bJ.border,bJ,bv,bz)}if(bE&&bE.enabled){bE.size=b(bE.size,bi);bK=W().type(bE.type).size(bE.size*bJ.size);bA=by.append("path").datum(bE).attr("class","tail").attr("d",bK());f(bA,0,bB.tailRadius);C(bA,bE.border,bE,bv,bz)}return by})();am(this.pPointerUpdate,180*this.pRange[0]/Math.PI,"auto");this.fMovePointer(a8(bq.data,0)[0],1000)},fMovePointer:function(be,bg){var bi=this,bh=1000;a8(bi.options,0,[be]);if(be==bi.pCurrentValue){return}var i=au(bi.eAxis.fScale(),be);var bf=(bi.pCurrentRad===null||bi.pCurrentRad===undefined||isNaN(bi.pCurrentRad))?bi.pRange[0]:bi.pCurrentRad;bi.pCursorUpdate.transition().duration(bg||bh).delay(0).ease("cubic-out").attrTween("d",function(){return function(bj){bi.pCurrentRad=bf+(i-bf)*bj;bi.pCurrentValue=r(bi.eAxis.fScale(),bi.pCurrentRad);if(bi.pComp!=0){bi.pPointerUpdate.attr("transform","rotate("+180*bi.pCurrentRad/Math.PI+")")}return bi.pCursorArc.endAngle(bi.pCurrentRad)()}}).each(function(){if(bi.pComp==0){d3.transition(bi.pPointerUpdate).duration(bg||bh).delay(0).ease("cubic-out").attr("transform","rotate("+180*i/Math.PI+")")}})},fAxisOpts:function(){if(!arguments){return this.options.axis}else{this.options.axis=arguments[0];return this.fApplyChange(this,fAxisOpts)}},fData:function(){if(!arguments){return this.options.data}else{this.options.data=arguments[0];return this.fApplyChange(this,fData)}}});var aY=Z(null,aD,{_CLASS_NAMES:aK.axis,scale:null,fInit:function(){this._super.fInit.apply(this,arguments);this.scale=d3.scale.linear()},_fRender:function(){var bo=this.options,bz=bo.axis,bh=bz.label,bp=bz.tick,by=bp.scale,bv=this.chartContext,bD=this.scale,bl=bo.x,bk=bo.y,bf=bo.dialArc.radius,bi=bo.dialArc.innerRadius,bm=bz.orient,bB=(bp.major.size=b(bp.major.size,bf)),bs=(bp.minor.size=b(bp.minor.size,bf)),bA=(bp.padding=b(bp.padding,bf)),be=bo.axis.tick.scale.stepNumber,i=null,br=bz.format,bq=bp.minor.count||3,bt=ao(bo.startAngle),bj=ao(bo.endAngle),bx=bz.label.normalize,bn=null,bg=null;var bu=a8(bo.data,0);bu=bu.length?bu[0]:0;if(by.min===undefined&&by.max===undefined){by.min=bu/10;by.max=bu+bu-by.min}by.min=(by.min===undefined)?bu-Math.abs(by.max-bu):by.min;by.max=(by.max===undefined)?bu+Math.abs(bu-by.min):by.max;this.scale.domain([by.min,by.max]).range([bt,bj]);bn=ap(bD);be=(!be&&by.stepInterval)?((bn[1]-bn[0])/by.stepInterval):(be||10);var bC=this.eContainer.d3Sel.selectAll(a2(this.fClassNames())).data([bo]),bw=(bC.enter().append("g").attr("class",this.fClassNames()),d3.transition(bC));bg=this.d3Sel=this.d3Sel||f(bw,bl,bk);(function(){var b8=i?i:(bD.ticks?bD.ticks.apply(bD,[be]):bD.domain()),b3=br?br:(bD.tickFormat?bD.tickFormat.apply(bD,[be]):String);b8=be<3?d3.extent(b8):b8;var bI=bd(bD,b8,bq),bG=bg.selectAll(aK.FN.tick+aK.FN.minor).data(bI,String),b0={stroke:aH(bp.minor.stroke,bv).value,"stroke-opacity":bp.minor.strokeOpacity,"stroke-width":bp.minor.strokeWidth},bX=bG.enter().insert("line",aK.FN.tick).attr("class",aK.tick+" "+aK.minor).style(b0),bW=d3.transition(bG.exit()).style({"stroke-opacity":0.000001}).remove(),bF=d3.transition(bG).style(b0);var b1=bg.selectAll(aK.FN.tick+aK.FN.major).data(b8,String),b4={stroke:aH(bp.major.stroke,bv).value,"stroke-opacity":bp.major.strokeOpacity,"stroke-width":bp.major.strokeWidth},bS=b1.enter().insert("g",aK.FN.domain).attr("class",aK.tick+" "+aK.major),bV=d3.transition(b1.exit()).style("stroke-opacity",0.000001).remove(),bL=d3.transition(b1),bE=null;var bU=bg.selectAll(aK.FN.domain).data([0]),b9=(bU.enter().append("path").attr("class",aK.domain),d3.transition(bU));var bY=bD.copy(),bZ=this.__chart__||bY;this.__chart__=bY;bS.append("line").style(b4);bS.append("text");var bM=bS.select("line"),bH=bL.select("line").style(b4),bR=b1.select("text").text(b3),bK=bS.select("text"),b2=bL.select("text"),b7,bQ,bJ,b5,bN,b6={fill:aH(bz.label.fill,bv).value,"fill-opacity":bz.label.fillOpacity||0.000001};if(bz.label.fill){bK.style(b6);b2.style(b6)}aq(bK,bz.label.font,bv);aq(b2,bz.label.font,bv);switch(bm){case"out":bJ=R(bp.major,bB,0);b5=R(bp.minor,bs,0);bN=aP(bh,bm,bp.major.style,bp.major.size,bA,0);bE=a6;bM.attr("y1",bJ[0]).attr("y2",bJ[1]);bH.attr("y1",bJ[0]).attr("x2",0).attr("y2",bJ[1]);bX.attr("y1",b5[0]).attr("y2",b5[1]);bF.attr("y1",b5[0]).attr("x2",0).attr("y2",b5[1]);b9.attr("fill-opacity",0.000001).attr("d",d3.svg.arc().startAngle(bn[0]).endAngle(bn[1]).innerRadius(bi).outerRadius(bf));if(bx){b7=(bh.position==="above")?aF:aE;bK.call(b7,bZ,bN);b2.call(b7,bY,bN);bR.attr("class","unselectable").attr("dy","0em")}else{bK.attr("y",bN);b2.attr("x",0).attr("y",bN);bR.attr("class","unselectable").attr("dy",bh.position==="above"?"1.3em":".5em").style("text-anchor","middle")}break;case"in":bQ=bf-bi,bJ=R(bp.major,bB,bQ);b5=R(bp.minor,bs,bQ);bN=aP(bh,bm,bp.major.style,bB,bA,bQ);bE=a6;bM.attr("y1",bJ[0]).attr("y2",bJ[1]);bH.attr("y1",bJ[0]).attr("x2",0).attr("y2",bJ[1]);bX.attr("y1",b5[0]).attr("y2",b5[1]);bF.attr("y1",b5[0]).attr("x2",0).attr("y2",b5[1]);b9.attr("fill-opacity",0.000001).attr("d",d3.svg.arc().startAngle(bn[0]).endAngle(bn[1]).innerRadius(bi).outerRadius(bf));if(bx){b7=(bh.position==="above")?aF:aE;bK.call(b7,bZ,bN),b2.call(b7,bY,bN),bR.attr("class","unselectable")}else{bK.attr("y",bN);b2.attr("x",0).attr("y",bN);bR.attr("class","unselectable").attr("dy",bh.position==="above"?"1.3em":".5em").style("text-anchor","middle")}break}var bT=bf;if(bD.rangeBand){var bP=bY.rangeBand()/2,bO=function(ca){return bD(ca)+bP};bS.call(bE,bO,bT);bL.call(bE,bO,bT)}else{bS.call(bE,bZ,bT);bL.call(bE,bY,bT);bV.call(bE,bY,4);bX.call(bE,bZ,bT);bF.call(bE,bY,bT);bW.call(bE,bY,bT)}b8[0]=(bp.showStartTickLabel===false)?bR.remove:b8[0];b8[b8.length-1]=(bp.showEndTickLabel===false)?null:b8[b8.length-1];bR.data(b8,String).exit().remove()})()},fScale:function(){if(!arguments.length){return this.scale}else{this.scale=arguments[0];return this.fApplyChange(this.fScale)}}});function G(be){var bf=be[0],i=be[be.length-1];return bf<i?[bf,i]:[i,bf]}function ap(i){return i.rangeExtent?i.rangeExtent():G(i.range())}function d(bf){var be=ap(bf);var i=bf.range();return i[0]<i[i.length-1]?[be[0],be[1]]:[be[1],be[0]]}function au(bf,i){var be=bf(i);isNaN(be)?be=d(bf)[0]:be;return bf.rangeBand?be+bf.rangeBand()/2:be}function r(bi,i){if(bi.invert){return bi.invert(i)}var be=bi.domain().length;var bf=d(bi);var bh=(bf[1]-bf[0])/be;var bg=Math.floor((i-bf[0])/bh);return bi.domain()[bg<be?bg:be-1]}var aL="out",aI={"in":1,out:1};function a6(be,i,bf){be.attr("transform",function(bg){return"translate("+bf*Math.sin(i(bg))+","+-bf*Math.cos(i(bg))+") rotate("+180/Math.PI*i(bg)+")"})}function aF(be,i,bf){be.attr("transform",function(bh){var bg=i(bh)+(i.rangeBand?i.rangeBand()/2:0);return"rotate("+-180/Math.PI*bg+")translate("+-bf*Math.sin(bg)+","+bf*Math.cos(bg)+")"}).style("text-anchor",function(bh){var bg=i(bh)+(i.rangeBand?i.rangeBand()/2:0);bg=bg<-Math.PI?bg+=2*Math.PI:bg>Math.PI?bg-=2*Math.PI:bg;return bg>-19*Math.PI/20&&bg<-Math.PI/20?"end":bg<19*Math.PI/20&&bg>Math.PI/20?"start":"middle"}).style("baseline-shift",function(bh){var bg=i(bh)+(i.rangeBand?i.rangeBand()/2:0);return -80*Math.pow(Math.sin(Math.abs(bg/2)),2)+"%"})}function aE(be,i,bf){be.attr("transform",function(bh){var bg=i(bh)+(i.rangeBand?i.rangeBand()/2:0);return"rotate("+-180/Math.PI*bg+")translate("+-bf*Math.sin(bg)+","+bf*Math.cos(bg)+")"}).style("text-anchor",function(bh){var bg=i(bh)+(i.rangeBand?i.rangeBand()/2:0);bg=bg<-Math.PI?bg+=2*Math.PI:bg>Math.PI?bg-=2*Math.PI:bg;return bg>-7*Math.PI/8&&bg<-Math.PI/8?"start":bg<7*Math.PI/8&&bg>Math.PI/8?"end":"middle"}).style("baseline-shift",function(bh){var bg=i(bh)+(i.rangeBand?i.rangeBand()/2:0);return -100*Math.pow(Math.cos(Math.abs(bg/2)),3)+"%"})}function bd(bg,bk,bf){var bl=[];if(bf&&bk.length>1){var bn=G(bg.domain()),bi=-1,be=bk.length,bj=(bk[1]-bk[0])/++bf,bh,bm;while(++bi<be){for(bh=bf;--bh>0;){if((bm=+bk[bi]-bh*bj)>=bn[0]){bl.push(bm)}}}for(--bi,bh=0;++bh<bf&&(bm=+bk[bi]+bh*bj)<bn[1];){bl.push(bm)}}return bl}function R(bf,be,i){return[(bf.style==="cross")?i-be:i,(bf.style==="above")?(i-be):(i+be)]}function aP(bg,bj,bf,bi,i,be){var bh=bg;if(bh.position==="same"){bh.position=bf}else{if(bh.position==="opposite"){bh.position=(bf==="below")?"above":"below"}}if(bh.position==="cross"){bh.position=(bj==="in")?"below":"above"}if(bh.position==="above"){return -Math.max(bi,0)-i+(bj==="in"?be:0)}else{return Math.max(bi,0)+i+(bj==="in"?be:0)}}var M={type:"linear",round:0,axisIndex:0,fillOpaticy:0.000001,border:{},axisIndex:0};w.linearSeries=M;Q("linear",function(i,bf,be){be.axis=q(bf.jointOpts.chart.yAxis[be.axisIndex||0]);return new aG(i,bf,be)});var az={linearSeries:"linearSeires",border:"border",bar:"bar",ranges:"ranges",range:"range",pointer:"pointer",marker:"marker",axis:"axis",tick:"tick",major:"major",minor:"minor",label:"label",title:"title",subTitle:"sutTitle"};var aG=Z(null,aD,{type:"linear",_CLASS_NAMES:aK.linearSeries+" "+aK.series,eAxis:null,fInit:function(){this._super.fInit.apply(this,arguments)},_fRender:function(){var bo=this._p,bg=this.chartContext,bm=this.options,be=bm.data,bf=bm.ranges,bt=bm.axis,bu=bt.bands,bj=bm.x,bi=bm.y,bk=bm.width,bs=bm.height,bv=bu&&bu.length,bp=bf&&bf.length,bn={x:bj,y:bi,width:bk,height:bs},bh=null,bq=null,bx=h(bt,bf,bm.data.map(function(by){return by.value})),bl=d3.extent(bx),bw=d3.scale.linear().domain(bx).range([0,bk]),i=null;bh=this.d3Sel=(this.d3Sel||this.eContainer.d3Sel.append("g").datum(bm).attr("class",this.fClassNames()));f(bh,bj,bi);bh.attr("display","none");bo.sGadgetBorder=bh.append("rect").attr("class",aK.border).attr({x:bn.x,y:bn.y,width:bn.width,height:bn.height});bm.round?bo.sGadgetBorder.attr({rx:bm.round,ry:bm.round}):null;C(bo.sGadgetBorder,bm.border,bm,bg);if(bv){bo.sBands=bh.selectAll(aK.FN.band).data(bu);bo.sBandsUpdate=(bo.sBands.enter().append("g").attr("class",aK.band),d3.transition(bo.sBands));o(bu,function(by){by.round=bm.round;return by});f(bo.sBandsUpdate,bn.x,bn.y);at(bo.sBandsUpdate,bw,bn,bg)}if(bp){bo.sRanges=bh.selectAll(aK.FN.range).data(bf);bo.sRangesUpdate=(bo.sRanges.enter().append("g").attr("class",aK.range),d3.transition(bo.sRanges));f(bo.sRangesUpdate,bn.x,bn.y);c(bo.sRangesUpdate,bw,bn,bg)}bt.x=0;bt.y=(bt.orient==="top")?0:bs;bt.width=bk;bq=this.eAxis=new S(this,bg,bt);bq.fScale(bw);var br=bh.selectAll(".axis").data([bt]).enter().append("g");f(br,0,bt.y);bq.fRender(br);bo.sPointers=bh.selectAll(aK.FN.pointer).data(be);bo.sPointersUpdate=(bo.sPointers.enter().append("g").attr("class",aK.pointer),d3.transition(bo.sPointers));bo.sPointersUpdate.each(function(bB,bA){var bC=d3.select(this).call(I,bB.marker,bs,bg),by=bw(bB.value),bD=(bB.markerPosition==="below")?bn.y+bn.height:bn.y,bz;f(bC,by,bD);if(bB.label&&bB.label.enabled!==false){bz=a4(bC,bB.label,bB.value,bg);f(bz,0,(bB.labelPosition==="below")?bB.marker.size/2:-(bz.bbox().height+bB.marker.size/2))}});i=bh.node().getBBox();bn.x=i.x<0?bn.x+Math.abs(i.x):bn.x;bn.width=i.width>bn.width?bn.width-bn.x-(i.width-bn.width):bn.width;bn.y=i.y<0?bn.y+Math.abs(i.y):bn.y;bn.height=i.height>bn.height?bn.height-bn.y-(i.height-bn.height):bn.height;bo.sGadgetBorder.attr({x:bn.x,y:bn.y,width:bn.width,height:bn.height});bq.fOptions().x=bn.x;bq.fOptions().y=(bt.orient==="top")?bn.y:bn.y+bn.height;bq.fOptions().width=bn.width;bw.range([bn.x,bn.x+bn.width]);bq.fRedraw();f(br,bq.fOptions().x,bq.fOptions().y);bo.sPointersUpdate.each(function(bz,by){f(d3.select(this),bw(bz.value),(bz.markerPosition==="below")?bn.y+bn.height:bn.y)});if(bv){bo.sBands=bh.selectAll(aK.FN.band).data(bu);bo.sBandsUpdate=(bo.sBands.enter().append("g").attr("class",aK.band),d3.transition(bo.sBands));o(bu,function(by){by.round=bm.round;return by});f(bo.sBandsUpdate,bn.x,bn.y);at(bo.sBandsUpdate,bw,bn,bg)}if(bp){bo.sRanges=bh.selectAll(aK.FN.range).data(bf);bo.sRangesUpdate=(bo.sRanges.enter().append("g").attr("class",aK.range),d3.transition(bo.sRanges));f(bo.sRangesUpdate,bn.x,bn.y);c(bo.sRangesUpdate,bw,bn,bg)}this.fTransition()},fTransition:function(){var be=this.eAxis.fScale(),i=this.eAxis.options;this.d3Sel.attr("display","block");this.fPointer().each(function(bf,bg){var bj=d3.select(this),bh=bj.attr("transform"),bi=bh&&bj.attr("transform").match(/([\+-]?[0-9\.]+)/g);if(bi&&bi.length>1){bj.call(f,be(0),parseInt(bi[1])).transition().duration(1000).call(f,be(bf.value),parseInt(bi[1]))}})},fPointer:function(be){if(arguments.length&&T(arguments[0])){return this._p.sPointers&&d3.select(this._p.sPointers[0][arguments[0]])}return this._p.sPointers},fMovePointer:function(be,bh){var bf=this.fPointer(be),bg=f(bf);if(bg.length){bf.transition().duration(1000).call(f,this.eAxis.fScale()(bh),bg[0].y)}}});var ax={type:"bullet",margin:{top:10,bottom:10,left:10,right:10},orient:"horizontal",fillOpacity:0.000001,axisIndex:0};w.bulletSeries=ax;ad.bulletSeries={size:"60%",width:5,fill:"black",fillOpacity:1};E.bulletSeries={type:"range",fill:"black",fillOpacity:1};Q("bullet",function(i,bf,be){be.axis=q(bf.jointOpts.chart.yAxis[be.axisIndex||0]);return new aO(i,bf,be)});var aO=Z(null,aD,{type:"bullet",_CLASS_NAMES:aK.bulletSeries+" "+aK.series,scale:null,eAxis:null,fInit:function(){this._super.fInit.apply(this,arguments);this.scale=d3.scale.linear();return this},_fRender:function(by){var bv=this,bt=this._p,bf=this.chartContext,br=this.options,bq=br.title,bu=br.subtitle,be=br.ranges,bi=br.data,i=br.targets,bx=br.axis,bj=bx.orient,bs=aU(br.margin),bg=br.orient,bn=br.x,bm=br.y,bo=br.width,bw=br.height,bA=h(bx,be,br.data.map(function(bB){return bB.value})),bp=d3.extent(bA),bz=this.scale.domain(bA),bl=(bg==="vertical"),bk=bx.reverse,bh=null;by=bh=this.d3Sel=by||(function(){var bB=bv.eContainer.d3Sel.selectAll(a2(bv.fClassNames())).data([br]);bB.enter().append("g").attr("class",bv.fClassNames());return bB})();by.each(function(bI,bF){var bL=null,bB={x:0,y:0,width:bo||0,height:bw||0},bH=d3.select(this);bH.attr("class")?null:bH.attr("class",this.fClassNames());bB.x=bs.left;bB.y=bs.top;bB.width-=(bs.left+bs.right);bB.height-=(bs.top+bs.bottom);var bG=bH.selectAll(aK.FN.title).remove().data([bq,bu]),bM=(bG.enter().append("g").attr("class",aK.title),bG.transition()),bC=d3.transition(bG.exit()).style("opacity",0.000001).remove(),bK=null,bJ=null,bE;bM.each(function(bP,bN){var bO=d3.select(this);if(bP&&bP.enabled!==false){bP.anchor=bl?"middle":(bk?"start":"end");if(bN===0){bK=new B(bv,bf,bP);bO.attr("class",aK.title+" "+aK.major);bK.fRender(bO)}else{bJ=new B(bv,bf,bP);bO.attr("class",aK.title+" "+aK.minor);bJ.fRender(bO)}}});bL=bM.bbox(true);if(bl){bB.y+=bk?0:bL.height;bB.height=bL.height}else{bB.x+=bk?0:bL.width;bB.width-=bL.width}bM.each(function(bP,bN){var bO=d3.select(this);if(bl){f(bO,bB.x+bB.width/2,(bB.y+(bk?bB.height:0)+(bE?bE.bbox().height:0)))}else{f(bO,bB.x+(bk?bB.width:0),bB.y+(bE?bE.bbox().height:0))}bE=bO});function bD(bN,bP){var bR=bH.selectAll(aK.FN.seriesPlot).data([br]),bS=(bR.enter().append("g").attr("class",aK.seriesPlot).call(f,bN.x,bN.y),bR),bT=k(bS,br,bf).attr({width:bN.width,height:bN.height}),bX=af(bN);bX.x=0;bX.y=0;bP=bP||1000;f(bT,bX.x,bX.y);bz.range(bg==="vertical"?[bX.height,0]:[0,bX.width]);if(be&&be.length){var bO=bS.selectAll(aK.FN.range).data(be);bO.enter().append("g").attr("class",aK.range);c(bO,bz,bX,bf)}var bQ=bS.selectAll(aK.FN.measure).data(bi);bQ.enter().append("g").attr("class",aK.measure);bQ.sort(function bV(b0,bZ){return bZ.value<b0.value?-1:bZ.value>b0.value?1:0});bQ.each(function(b5,b1){var b4=d3.select(this),b0=b(b5.size||(bl?bX.width/3:bX.height/3),bl?bX.width:bX.height),bZ=b5.asDot||false,b3=b4.selectAll("rect").data([b5]),b2=(b3.enter().append("rect"),b3),b6=bz(b5.value);if(bl){b4.call(f,bX.width/2,bk?0:bX.height);b2.attr("x",-b0/2).attr("y",bk?0:-b6).attr("width",b0).attr("height",bZ?b0:b6)}else{b4.call(f,bk?bX.width:0,bX.height/2);b2.attr("x",0).attr("y",-b0/2).attr("width",bZ?b0:0).attr("height",b0).transition().duration(bP).attr("x",bk?b6-bX.width:0).attr("y",-b0/2).attr("width",bZ?b0:(bk?bX.width-b6:b6)).attr("height",b0)}C(b3,b5.border,b5,bf)});var bU=bS.selectAll(aK.FN.target).data(i);bU.enter().append("g").attr("class",aK.target);bU.sort(function bV(b0,bZ){return b0.value<bZ.value?-1:b0.value>bZ.value?1:0});bU.each(function(b6,b1){var b5=d3.select(this),b0=b(b6.size||(bl?bX.width/3:bX.height/3),bl?bX.width:bX.height),b3=b6.width,b4=b5.selectAll("rect").data([b6]),b2=(b4.enter().append("rect"),b4),bZ=bz(b6.value);if(bl){b5.call(f,bX.width/2,bk?0:bX.height);b2.attr("x",bX.width/2).attr("y",bk?bZ-b3:-bZ+b3).attr("width",b0).attr("height",b3)}else{b5.call(f,bk?bX.width:0,bX.height/2);b2.transition().duration(bP).attr("x",bk?bZ-bX.width-b3:bZ).attr("y",-b0/2).attr("width",b3).attr("height",b0)}C(b4,b6.border,b6,bf)});var bY=null,bW=bl?(bx.orient==="top"?"right":(bx.orient==="bottom"?"left":bx.orient)):(bx.orient==="left"?"bottom":(bx.orient==="right"?"top":bx.orient));axisUpdate=bS.selectAll(aK.FN.axis).data([bx]);axisUpdate.enter().append("g").attr("class",aK.axis);axisUpdate.each(function(b1,bZ){var b0=d3.select(this);bx.width=bX.width;bx.height=bX.height;bx.orient=bW;bY=bv.eAXis=new S(bv,bf,bx);bY.fScale(bz).fRender(b0);b0.call(f,(bW==="right")?bX.width:0,(bW==="bottom")?bX.height:0)});return bS.bbox(true)}bL=bD(bB,0);if(bL.x<0||bL.y<0||bL.width>bB.width||bL.height>bB.height){bB.x+=bL.x<0?Math.abs(bL.x):0;bB.y+=bL.y<0?Math.abs(bL.y):0;bB.width=bB.width*2-bL.width;bB.height=bB.height*2-bL.height;bD(bB,1000)}});this.fTransition(by);bt.scale=bz.copy();return this},fTransition:function(){},fRedraw:function(){this.fRender()}});var ab={type:"thermometer",type:"bullet",margin:{top:10,bottom:10,left:10,right:10},fill:"rgb(225, 225, 225)",fillOpacity:1,border:{stroke:"black",strokeWidth:1,strokeOpacity:1},axisIndex:0,ballSize:"50%",tubeSize:"20%",topRound:0,};w.thermometerSeries=ab;E.thermometerSeries={type:"range",fill:"black",fillOpacity:1};Q("thermometer",function(i,bf,be){be.axis=q(bf.jointOpts.chart.yAxis[be.axisIndex||0]);return new aV(i,bf,be)});var aV=Z(null,aD,{type:"thermometer",_CLASS_NAMES:aK.thermometerSeries+" "+aK.series,scale:null,eAxis:null,fInit:function(){this._super.fInit.apply(this,arguments);this.scale=d3.scale.linear();return this},_fRender:function(bw){var bs=this,bq=this._p,bf=this.chartContext,bo=this.options,i=bo.data,bh=i.label,be=bo.ranges,bv=bo.axis,bk=bo.x,bj=bo.y,bl=bo.width,bu=bo.height,bz=null,bn=null,by=this.scale,bg=null,bi=b(bo.ballSize,bl),bm=b(bo.tubeSize,bl),bp=aU(bo.margin),br,bt=Math.acos(bm/bi)*bi/2,bx=bi/2-bt;bv.reverse=false;bz=h(bv,be,bo.data.map(function(bA){return bA.value})),bn=d3.extent(bz),by=this.scale.domain(bz);bw=bg=this.d3Sel=bw||(function(){var bA=bs.eContainer.d3Sel.selectAll(a2(bs.fClassNames())).data([bo]);bA.enter().append("g").attr("class",bs.fClassNames());return bA})();bw.each(function(bF,bC){var bE=null,bA={x:0,y:0,width:bl||0,height:bu||0},bD=d3.select(this);bD.attr("class")?null:bD.attr("class",bs.fClassNames());bA.x=bp.left;bA.y=bp.top;bA.width-=(bp.left+bp.right);bA.height-=(bp.top+bp.bottom);if(bh){bh.anchor="middle";var bG=bD.selectAll(aK.FN.label).data([bh]);bG.enter().append("g").attr("class",aK.label);bA.height-=label.bbox().height;label.call(f,bl/2,bA.y+bA.height-label.bbox().height)}function bB(bO,bH){var bX=bO,bM=bX.height-bi+bx,bT="M"+(bX.y+(bX.width-bm)/2)+","+(bX.y+bM)+" l"+0+","+(-bM)+" l"+bm+","+0+" l"+0+","+bM,bP="M"+(bX.y+(bX.width-bm)/2)+","+(bX.y+bM)+" a"+bi/2+","+bi/2+" 0 1, 0 "+bm+","+0;seriesPlot=bD.selectAll(".plotBorder").data([bT,bP]);seriesPlot.enter().append("path").attr("class","plotBorder");seriesPlot.each(function(b4,b1){var b2=d3.select(this),b3={fill:a5(b1==0?"tube":"ball",bo.fill),fillOpacity:bo.fillOpacity,border:af(bo.border)};b2.attr("d",b4).call(C,b3.border,b3,bf)});var bJ=bD.selectAll(aK.FN.axis).data([bv]),bW=(bJ.enter().append("g").attr("class",aK.axis),bJ),bK=bW.selectAll(aK.FN.range).data(be),bL=bK.enter().append("g").attr("class",aK.range),bR=bM-bv.yOffset,bU=[bR,0];bW.call(f,(bl+bm)/2+bv.xOffset,bO.y+bv.yOffset);by.range(bU);bL.each(function(b8,b4){var b5=d3.select(this),b9=by(b8.x1||bn[0]),b7=by(b8.x2||bn[1]),b2=be.y1||0,b1=be.y2?(be.y2-b2):(bv.tick.minor&&bv.tick.minor.size)||(bv.tick.major&&bv.tick.major.size/2)||Math.min(5,bm/5),b6=b5.selectAll("rect").data([[b9,b7,b1]]),b3=(b6.enter().append("rect"),b6);b3.attr("x",1).attr("y",b7).attr("width",b1).attr("height",Math.abs(b7-b9)).call(C,b8.border,b8,bf)});bv.orient="right";bv.label.position="same";bv.tick.major.style="right";bv.width=bX.width;bv.height=bR;if(bv.tick.minor){bv.tick.minor.style="rgiht"}br=bs.eAxis=new S(bs,bf,bv);br.fScale(by);br.fRender(bW);var b0=i[0],bS=a5("ball",b0.fill),bV=a5("tube",b0.fill),bZ=bD.selectAll(aK.FN.scaleTube).data([0]),bI=bD.selectAll(aK.FN.scaleBall).data([0]),bN={fill:bS,fillOpacity:b0.fillOpacity,border:{strokeOpacity:0}},bQ={fill:bV,fillOpacity:b0.fillOpacity,border:{strokeOpacity:0}},bY=by(b0.value);bZ.enter().append("path").call(C,bQ.border,bQ,bf).attr("d","M"+(bX.y+(bX.width-bm)/2)+","+(bX.y+bM)+" l"+0+","+1+" l"+bm+","+0+" l"+0+","+1).transition().duration(bH).attr("d",function(b2,b1){console.log(b2+", "+b1);return"M"+(bX.y+(bX.width-bm)/2)+","+(bX.y+bM)+" l"+0+","+-(bX.height-bY)+" l"+bm+","+0+" l"+0+","+(bX.height-bY)});bI.enter().append("path").call(C,bN.border,bN,bf).attr("d",bP)}bB(bA,5000)});return this},fRedraw:function(){this.fRender(this.d3Sel)}});function a5(be,bf){var i={};if(be==="ball"){i.type="radialGradient";i.parameters=["50%","50%","50%","50%","50%"];i.stops=[{offset:"0%",stopColor:"rgb(225, 225, 225)",stopOpacity:1},{offset:"100%",stopColor:bf,stopOpacity:1}]}else{i.type="linearGradient";i.parameters="L,R";i.stops=[{offset:"0%",stopColor:bf,stopOpacity:1,},{offset:"30%",stopColor:"rgb(225, 225, 225)",stopOpacity:1,},{offset:"100%",stopColor:bf,stopOpacity:1,}]}return i}d3charts={ChartGlobal:U,ClassNames:aK,ChartContext:Y,Element:aD,LedLabel:O,Label:B,Chart:ba,Title:H,Axis:S,ArcAxis:aY,Legend:a9,Plot:l,DialSeries:aZ,LinearSeries:aG,BulletSeries:aO,ThermometerSeries:aV,api:{clone:q,merge:m,translate:f}};window.d3charts=window.d3charts||d3charts})();